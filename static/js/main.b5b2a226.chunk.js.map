{"version":3,"sources":["RTCHAT/myMessage.js","components/textMessage.js","RTCHAT/RTC/message.js","RTCHAT/callStatus.js","RTCHAT/RTC/PeerConnectionManager.js","RTCHAT/RTC/messageTypes.js","RTCHAT/CALL_SIGNALING/callStatus.js","RTCHAT/CALL_SIGNALING/callPacket.js","RTCHAT/CALL_SIGNALING/CallSignalingManager.js","RTCHAT/communicator.js","proxy.js","components/businessLogic/myUser.js","RTCHAT/mySingleUserChat.js","RTCHAT/myGroupChat.js","store/reducers/chatReducer/index.js","RTCHAT/types.js","store/reducers/authReducer/index.js","store/reducers/index.js","store/index.js","RTCHAT/index.js","store/actions/authActions.js","components/singleChat.js","components/singleUserChat.js","components/videoChatScreen.js","App.js","serviceWorker.js","index.js"],"names":["MyMessage","this","_id","Math","random","from","to","body","status","SENDING","sentTimeDate","Date","now","seenTimeDate","messageType","TEXT","chatType","setAttributes","setValue","message","type","setAsGroupMessage","VIDEO","IMAGE","SENT","RECIEVED","SEEN","TextMessage","state","props","isMe","cid","backColor","foreColor","alignment","style","width","float","display","minWidth","maxWidth","backgroundColor","padding","marginTop","color","toLocaleTimeString","Component","payload","CallStatus","CALLING","RUNNING","ACCEPTED","CONNECTING","CONNECTED","ON_ANOTHER_CALL","DECLINED","PeerConnectionManager","communicatorContext","socketConnection","setChannelEnabled","kind","value","index","localStream","getTracks","findIndex","t","enabled","handleCommunication","socket","on","res","peerConnection","query","console","log","setRemoteDescription","RTCSessionDescription","then","recieveCall","catch","err","addIceCandidate","RTCIceCandidate","createConnection","myId","peerId","config","configuration","RTCPeerConnection","onicecandidate","event","candidate","callerId","sendMessage","onaddstream","stream","context","handelOnAddRemoteStream","peerStream","oniceconnectionstatechange","e","info","target","iceConnectionState","destroyConnection","forEach","track","stop","close","startCall","isFront","navigator","mediaDevices","enumerateDevices","sourceInfos","length","sourceInfo","facing","deviceId","getUserMedia","audio","echoCancellation","video","handelOnAddLocalStream","addStream","createOffer","offerToReceiveAudio","offerToReceiveVideo","offer","setLocalDescription","createAnswer","answer","emit","getStream","iceServers","url","urls","username","credential","RINGING_REQUEST","RINGING","REJECTED","USEROFFLINE","USERONLINE","ON_OHTER_CALL","CallPacket","CallSignalingManager","communicatorSocket","handelSingnaling","packet","isBusy","handelOnAddCallStatus","createRTCConnection","startRTCCall","destroyRTCConnection","connetingPeer","ack","initializeSingnaling","Promise","resolve","reject","socketConnected","acceptSignaling","endCallSingnal","Communicator","dataHandler","ackEmitter","ackEmitters","rtcConfig","callSignalingManager","videoChatContext","rtcConnectionManager","connect","_dataHandler","_ackEmitter","_ackEmitters","io","RTCPeerConnectionManager","send","chatId","markSeen","messages","recieverCid","sendOnRecieveAck","msg","setState","isConnected","error","timeout","reason","attemptNumber","initializeSignaling","acceptCall","setChatContext","endCallSignal","recieverId","isVideo","setRTCChannelEnabled","remoteStream","callStatus","MyUser","phoneNumber","user","MySingleUserChat","title","selected","unseenCount","lastMessage","chatStatus","CHAT_NOT_FOUND","compose","sc1","sc2","chat","singleChat","setChat","setUser","USER_NOT_FOUND","USER_CHAT_FOUND","MyGroupChat","gcid","users","setTimeout","AddGroupChatListner","Chat","ChatReducer","mState","action","localStorage","setItem","JSON","stringify","clone","ucId","ucIndex","uc","push","sort","a","b","friend","icbIndex","c","messageSent","ucsIndex","hindex","filter","ackIndex","ackmIndex","m","newId","msgs","statuss","ccid","acksIndex","markCounter","msgsIndex","element","seenmIndex","msgseen","removeItem","data","getItem","parse","obj","AuthReducer","RootReducer","combineReducers","middleWare","thunk","initialState","store","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","applyMiddleware","MyCommunicator","MyCommunicatorObj","MyGroupChatCommunicators","prepareChat","userId","axios","post","success","incomingChat","userChat","myChat","getState","newChat","iIndex","ic","icfound","mIndex","mc","mmIndex","mmc","mmcfound","iiIndex","iic","dispatch","connectChat","sentDataHandler","SingleChat","messageBody","handleSendMesage","onClick","friendId","height","fontSize","marginLeft","overflowY","map","key","onFocus","cIndex","onChange","borderRadius","placeholder","border","React","SingleUserChat","cursor","borderBottom","align","zIndex","textAlign","textOverflow","VideoCallingScreen","connectUser","alert","handleInitiateCall","endCall","answerCall","setSelected","id","configs","getSelected","callRunning","isMute","connectionState","iceTransports","peerConnectionA","myStream","srcObject","volume","muted","friendStream","innerHeight","alignSelf","ref","backfaceVisibility","autoPlay","position","bottom","right","left","innerWidth","className","Fragment","paddingLeft","margin","App","calling","handleConnect","chatData","sc","onConnect","handleConnectSocket","onSendMessage","handleSendMessage","reserved","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b5b2a226.chunk.js","sourcesContent":["\r\nclass MyMessage{\r\n    static TEXT = \"TEXT\";\r\n    static VIDEO = \"VIDEO\";\r\n    static IMAGE = \"IMAGE\";\r\n\r\n\r\n    static SENDING = 0;\r\n    static SENT = 1;\r\n    static RECIEVED = 2;\r\n    static SEEN = 3;\r\n\r\n    constructor(){\r\n        this._id = Math.random()*100000*Math.random();\r\n        this.from = \"\";\r\n        this.to = \"\";\r\n        this.body = \"\";\r\n        this.status = MyMessage.SENDING;\r\n        this.sentTimeDate = Date.now();\r\n        this.seenTimeDate = null\r\n        this.messageType = MyMessage.TEXT;\r\n        this.chatType = \"single\"\r\n        this.setAttributes = (from, to, body) => {\r\n            this.from = from;\r\n            this.to = to;\r\n            this.body = body;\r\n            return this;\r\n        }\r\n        \r\n        this.setValue = (message) => {\r\n            this._id = message._id;\r\n            this.from =message.from;\r\n            this.to = message.to;\r\n            this.body = message.body;\r\n            this.status = message.status;\r\n            this.type = message.type;\r\n            return this;\r\n        }\r\n        this.setAsGroupMessage = () => {\r\n            this.chatType = \"group\";\r\n            return this;\r\n        }\r\n    }\r\n\r\n}\r\nexport default MyMessage;","import React, { Component } from 'react';\r\nimport MyMessage from '../RTCHAT/myMessage';\r\nconst PRIMARY = \"#5BBC93\"\r\nconst SECONDRY = \"#F2F3F8\";\r\n\r\n\r\n\r\nclass TextMessage extends Component {\r\n    state = {  }\r\n    render() { \r\n        const message = this.props.message?this.props.message: new MyMessage().setAttributes(\"\", \"a\", \"abasdfasdf asdfasdfasdfs dfasdfasdfasdf asdfasdfasdfasd fasdfasdfasd fasdfasdfc dedfsadf\") ;\r\n        const isMe = this.props.cid === message.from;\r\n        const backColor = isMe? SECONDRY:  PRIMARY\r\n        const foreColor = isMe? PRIMARY:  SECONDRY\r\n        const alignment = isMe? \"right\": \"left\";\r\n\r\n        return ( \r\n            <div style={{width: \"100%\", float: \"left\"}}>\r\n                <div style={{display: \"block\",minWidth: \"40%\", maxWidth: \"70%\" , float: alignment, backgroundColor: backColor, padding: 10, marginTop: 5 }}>\r\n                    <span style={{color: foreColor}}> {message.body}</span>\r\n                    <span style={{float: \"right\", color: \"red\"}}>{message.status+\"] \"+new Date(message.sentTimeDate).toLocaleTimeString()} o</span>\r\n                </div>\r\n            </div>\r\n         \r\n         );\r\n    }\r\n}\r\n \r\nexport default TextMessage;","class MyMessage\r\n{\r\n    constructor(type, payload, to){\r\n        this.type = type;\r\n        this.payload = payload;\r\n        this.to = to;\r\n    }\r\n}\r\nexport default MyMessage;","class CallStatus{\r\n    static CALLING = 0;\r\n    static RUNNING = 1;\r\n    static ACCEPTED = 2;\r\n    static CONNECTING = 3;\r\n    static CONNECTED = 4;\r\n    static ON_ANOTHER_CALL = 5;\r\n    static DECLINED = 6;\r\n}\r\nexport default CallStatus;","// import { RTCPeerConnection, mediaDevices, RTCIceCandidate, RTCSessionDescription } from 'react-native-webrtc';\r\n\r\nimport { OFFER, ANSER, CALLER_ICE, RECIEVER_ICE} from './messageTypes';\r\nimport MyMessage from './message';\r\nimport CallStatus from '../callStatus';\r\n\r\n// {\r\n//     urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n//     username: 'a9a2b514',\r\n//     credential: '00163e7826d6'\r\n//     }\r\nclass PeerConnectionManager \r\n{\r\n  \r\n    constructor(communicatorContext, socketConnection ){\r\n        this.socket = socketConnection;\r\n        this.myId = null;\r\n        this.peerId = null;\r\n        this.localStream = null;\r\n        this.peerStream = null;\r\n        this.context = communicatorContext;\r\n        // this.configuration = {iceServers: [{url: \"stun:stun.l.google.com:19302\"}]};\r\n        this.configuration = {iceServers: [\r\n            {url: \"stun:stun.l.google.com:19302\"}, \r\n            {\r\n                urls: \"turn:numb.viagenie.ca\", \r\n                username: \"ata.mirza40@gmail.com\", \r\n                credential: \"ataMirza12345_\"\r\n            }\r\n            ]};\r\n      \r\n        this.peerConnection = null;\r\n        this.handleCommunication();\r\n    }\r\n\r\n    setChannelEnabled = (kind, value) => {\r\n       let index = (this.localStream.getTracks() || []).findIndex(t => t.kind === kind);\r\n       if(index >=0){\r\n           this.localStream.getTracks()[index].enabled = value;\r\n       }\r\n    }\r\n\r\n    handleCommunication = () =>{\r\n       \r\n        this.socket.on(\"onRecieveRTCMessage\", (res) => {\r\n            if(this.peerConnection){\r\n         \r\n            let message = res.query;\r\n            switch(message.type)\r\n            {\r\n                case OFFER: // RECIEVER\r\n                    console.log(\"STEP-1: RECIEVE OFFER\");\r\n                    console.log(message);\r\n                    console.log(\"---Adding offer to peer connection\")\r\n                    this.peerConnection.setRemoteDescription(new RTCSessionDescription(message.payload))\r\n                        .then(() => {\r\n                           console.log(\"---added remote offer\")\r\n                           this.recieveCall();\r\n                        }).catch(err => {\r\n                            console.log(\"CATCH- error in setting remote offer\");\r\n                            console.log(err)\r\n                        })\r\n                    break;\r\n                case ANSER: // CALLER\r\n                    console.log(\"STEP-4: ANSER RECIEVED\");\r\n                    this.peerConnection.setRemoteDescription(new RTCSessionDescription(message.payload))\r\n                        .then(() => {\r\n                            console.log(\"---added remote answer\")\r\n\r\n                            //// EMIT CALL STARTING......\r\n\r\n                        }).catch(err => {\r\n                            console.log(\"CATCH- error in setting remote answer\");\r\n                            console.log(err)\r\n                        })\r\n                    break;\r\n                case CALLER_ICE: // RECIEVER\r\n                    this.peerConnection.addIceCandidate(new RTCIceCandidate(message.payload))\r\n                        .then(() => {\r\n                            console.log(\"++++++++ICE ADDED: RECIEVER\")\r\n                        }).catch(err => {\r\n                            console.log(\"CATCH- error in setting remote Reciever ice candidate\");\r\n                            console.log(err)\r\n                        })\r\n                    break;\r\n                case RECIEVER_ICE:  // CALLER\r\n                    console.log(\"++++++++ICE ADDED\");\r\n                    this.peerConnection.addIceCandidate(new RTCIceCandidate(message.payload))\r\n                        .then(() => {\r\n                            console.log(\"++++++++ICE ADDED: CALLER\")\r\n                        }).catch(err => {\r\n                            console.log(\"CATCH- error in setting remote Caller ice candidate\");\r\n                            console.log(err)\r\n                        })\r\n                    break;\r\n                default: \r\n                    break;\r\n            }\r\n        }else{\r\n            console.log(\"PEER CONNECTION NOT INITIALIZED\");\r\n        }\r\n        })\r\n\r\n       \r\n\r\n       \r\n    }\r\n\r\n    createConnection  = (myId, peerId, config = null) => {\r\n        this.myId = myId;\r\n        this.peerId = peerId;\r\n        if(config !== null){\r\n            this.configuration = config;\r\n        }\r\n        console.log(\"CONFIGS\");\r\n        console.log(this.configuration);\r\n        this.peerConnection = new RTCPeerConnection(this.configuration);\r\n        this.peerConnection.onicecandidate = (event) => {\r\n            if(event.candidate){\r\n                if(this.callerId){\r\n                    this.sendMessage(new MyMessage(CALLER_ICE, event.candidate, this.peerId));                \r\n                }else{\r\n                    this.sendMessage(new MyMessage(RECIEVER_ICE, event.candidate, this.peerId));\r\n                }\r\n            }\r\n        }\r\n\r\n        this.peerConnection.onaddstream = event => {\r\n            console.log(\"Streaming...!!!\");\r\n            console.log(event.stream);\r\n            this.context.handelOnAddRemoteStream(event.stream)\r\n            this.peerStream = event.stream;\r\n        }\r\n        this.peerConnection.oniceconnectionstatechange = (e) => {\r\n            console.info('ICE Connection State Changed:', e.target.iceConnectionState)\r\n            switch (e.target.iceConnectionState) {\r\n              case 'closed':\r\n              case 'disconnected':\r\n              case 'failed':\r\n                  console.log(\"FAILD, Disconnected OR closed\");\r\n                break\r\n            }\r\n        }\r\n    \r\n    \r\n    }\r\n    destroyConnection = () => {\r\n        // this.setChannelEnabled(\"video\", false);\r\n        // this.setChannelEnabled(\"audio\", false);\r\n        if(this.localStream){\r\n            this.localStream.getTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        }\r\n        if(this.peerConnection){\r\n            this.peerConnection.close();\r\n            this.peerConnection = null;\r\n            this.localStream = null;\r\n            this.peerStream = null;\r\n            this.peerId = null;\r\n        }\r\n        // this.peerConnection = null;\r\n        // this.peerId = null;\r\n        // this.localStream = null;\r\n        // this.peerStream = null;\r\n       \r\n    }\r\n\r\n\r\n    startCall = ( isFront, isVideo = true) => {\r\n        this.callerId = true;\r\n        console.log(\"STEP-1: Turning On Cam\")\r\n        let videoSourceId = null;\r\n       navigator.mediaDevices.enumerateDevices().then(sourceInfos => {\r\n            console.log(\"Source Infos\");\r\n            console.log(sourceInfos);\r\n            for (let index = 0; index < sourceInfos.length; index++) {\r\n                const sourceInfo = sourceInfos[index];\r\n                if(sourceInfo.kind == \"videoinput\" && sourceInfo.facing == (isFront? \"front\": \"back\")){\r\n                  videoSourceId = sourceInfo.deviceId;\r\n                }\r\n                \r\n            }\r\n\r\n        })\r\n        navigator.mediaDevices.getUserMedia({\r\n            audio: {\r\n                echoCancellation: true,\r\n            },\r\n            video: true\r\n        }).then(stream => {\r\n            this.localStream = stream;\r\n            this.context.handelOnAddLocalStream(stream);\r\n            \r\n            console.log(\"STEP-2: ADDING STREAM TO PEER CONNECTION\");\r\n            this.peerConnection.addStream(this.localStream);\r\n            console.log(stream);\r\n\r\n            console.log(\"STEP-3: CREATING OFFER\")\r\n            this.peerConnection.createOffer({offerToReceiveAudio: true, offerToReceiveVideo: true})\r\n                .then(offer => {\r\n                    this.sendMessage(new MyMessage(OFFER, offer, this.peerId) );\r\n                    this.peerConnection.setLocalDescription(offer)\r\n                        .then(() => {\r\n                            console.log(\"---Offer- locally added\");\r\n                        }).catch(err=> {\r\n                            console.log(\"CATCH-error in adding offer\")\r\n                        })\r\n                }).catch(err => {\r\n                    console.log(\"CATCH- error in creating offer\");\r\n                    console.log(err);\r\n                })\r\n        })\r\n    }\r\n\r\n\r\n    recieveCall = () => {\r\n        this.callerId = false;\r\n        let videoSourceId = null;\r\n        let isFront = true;\r\n\r\n        navigator.mediaDevices.enumerateDevices().then(sourceInfos => {\r\n            console.log(\"Source Infos\");\r\n            console.log(sourceInfos);\r\n            for (let index = 0; index < sourceInfos.length; index++) {\r\n                const sourceInfo = sourceInfos[index];\r\n                if(sourceInfo.kind == \"videoinput\" && sourceInfo.facing == (isFront? \"front\": \"back\")){\r\n                  videoSourceId = sourceInfo.deviceId;\r\n                }\r\n                \r\n            }\r\n        })\r\n        navigator.mediaDevices.getUserMedia({\r\n            audio: {\r\n                echoCancellation: true\r\n            },\r\n            video: true\r\n        }).then(stream => {\r\n            this.localStream = stream;\r\n            this.context.handelOnAddLocalStream(stream);\r\n\r\n            console.log(\"STEP-2: ADDING STREAM TO PEER CONNECTION\");\r\n            this.peerConnection.addStream(this.localStream);\r\n\r\n\r\n            console.log(\"STEP-3: CREATING ANSWER\");\r\n            this.peerConnection.createAnswer({offerToReceiveAudio: true, offerToReceiveVideo: true})\r\n                .then(answer =>{\r\n                    console.log(answer);\r\n                    this.sendMessage(new MyMessage(ANSER, answer, this.peerId));\r\n                    console.log(\"---adding answer to description\");\r\n                    this.peerConnection.setLocalDescription(answer)\r\n                            .then(() => {\r\n                                console.log(\"---answer added locally\");\r\n                            }).catch(err =>{\r\n                                console.log(\"CATCH- error in adding answer locally\");\r\n                                console.log(err);\r\n                            })\r\n                }).catch(err =>{\r\n                    console.log(\"CATCH-error in creating answer\");\r\n                    console.log(err);\r\n                })\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n   \r\n    sendMessage = (message) => {\r\n        console.log(\"---Sending message of type: \"+ message.type)\r\n        console.log(message);\r\n        this.socket.emit(\"onSendRTCMessage\", {query: message });\r\n    }\r\n\r\n\r\n    getStream = () => {\r\n        return this.localStream;\r\n    }\r\n\r\n}\r\nexport default PeerConnectionManager;\r\n\r\n\r\n","export const OFFER = \"OFFER\";\r\nexport const ANSER = \"ANSWER\";\r\nexport const CALLER_ICE = \"CALLER_ICE\";\r\nexport const RECIEVER_ICE = \"RECIEVER_ICE\";","class CallStatus{\r\n    static RINGING_REQUEST = 0;\r\n    static RINGING  = 2;\r\n    static ACCEPTED = 3;\r\n    static REJECTED = 4;\r\n    static USEROFFLINE = 5;\r\n    static USERONLINE = 6;\r\n    static ON_OHTER_CALL = 7;\r\n\r\n}\r\nexport default CallStatus;","class CallPacket{\r\n    constructor(type, to, from){\r\n        this.type = type;\r\n        this.to = to;\r\n        this.from = from;\r\n    }\r\n}\r\nexport default CallPacket;","import CallStatus from \"./callStatus\";\r\nimport CallPacket from \"./callPacket\";\r\n\r\nclass CallSignalingManager{\r\n    constructor(communicatorSocket, communicatorContext){\r\n        this.socket = communicatorSocket;\r\n        this.context = communicatorContext;\r\n        this.peerId = null;\r\n        this.isBusy = false;\r\n\r\n        this.handelSingnaling();\r\n    }\r\n\r\n\r\n    handelSingnaling = () => {\r\n        this.socket.on(\"onListen\", res => {\r\n            let packet =res.query;\r\n\r\n            switch(packet.type){\r\n                case CallStatus.RINGING_REQUEST: //// RECIEVER\r\n                    if(this.isBusy){\r\n                        this.socket.emit(\"onCommunicate\", {query: new CallPacket(CallStatus.ON_OHTER_CALL, packet.from, this.context.cid)})\r\n                    }else{\r\n                        this.isBusy = true;\r\n                        this.context.handelOnAddCallStatus(CallStatus.RINGING_REQUEST)\r\n                        this.peerId = packet.from;\r\n                        console.log(\"INCOMMING CALL: RING REQUEST\")   \r\n                        //// create RTC Connection here,\r\n                        console.log(\"CREATING RTC CONNECTION: RECIVER\")\r\n                        this.context.createRTCConnection(packet.from)\r\n                        //// show window ringing \r\n                        this.socket.emit(\"onCommunicate\", {query: new CallPacket(CallStatus.RINGING, packet.from, this.context.cid)})\r\n                    }\r\n                    \r\n                    break;\r\n                \r\n                case CallStatus.RINGING:  ////////   CALLER \r\n                this.isBusy = true;\r\n                this.context.handelOnAddCallStatus(CallStatus.RINGING)\r\n\r\n                    ////// UPDATE STATUS ///// ringing.... \r\n                    console.log(\"CALL: RINGING...\")\r\n                    break;\r\n                \r\n                case CallStatus.ACCEPTED: ///// CALLER \r\n                this.isBusy = true;\r\n                this.context.handelOnAddCallStatus(CallStatus.ACCEPTED)\r\n\r\n                    console.log(\"CALL: ACCEPTED\")\r\n                    ///// Start RTC Call...... \r\n                    this.context.startRTCCall(true)\r\n                    break;\r\n                case CallStatus.REJECTED: \r\n                    this.isBusy = false;\r\n                    this.context.handelOnAddCallStatus(CallStatus.REJECTED);\r\n                    this.context.destroyRTCConnection();\r\n                    break;\r\n                case CallStatus.ON_OHTER_CALL: \r\n                    this.isBusy = false;\r\n                    this.context.handelOnAddCallStatus(CallStatus.ON_OHTER_CALL);\r\n                    this.context.destroyRTCConnection();\r\n                    break;\r\n                default: \r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n\r\n    connetingPeer = () => {\r\n        console.log(\"Connecting...\")\r\n        this.context.handelOnAddCallStatus(CallStatus.RINGING);\r\n        this.socket.emit(\"onCommunicate\", {query: new CallPacket(CallStatus.RINGING_REQUEST, this.peerId, this.context.cid )}, (ack) =>{\r\n            if(ack.type === CallStatus.USEROFFLINE){\r\n                console.log(\"PEER OFFLINE: RECONNECTING\")\r\n                this.connetingPeer(this.peerId)\r\n            }else{\r\n                console.log(\"PEER: ONLINE\")\r\n                \r\n                //// CAN TRIGGER RINGIN HERE \r\n               \r\n            }\r\n        } )\r\n    }\r\n\r\n    initializeSingnaling = (to) => {\r\n        this.peerId = to;\r\n        this.isBusy = true;\r\n        console.log(\"STEP1: initializing signaling\")\r\n        return new Promise((resolve, reject) => {\r\n            if(this.context.socketConnected){\r\n                console.log(\"Me: CONNECTED\")\r\n                //// start signaling, create RTC connection\r\n                console.log(\"CREATING RTC CONNECTION: CALLER\")\r\n                this.context.createRTCConnection(to);\r\n                this.connetingPeer(to);\r\n                resolve(true);\r\n            }else{\r\n                console.log(\"Me: NOT CONNECTED\")\r\n                reject(false);\r\n            }  \r\n        })                                     \r\n    }\r\n\r\n    acceptSignaling = () => {\r\n        this.isBusy = true;\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit(\"onCommunicate\", {query: new CallPacket(CallStatus.ACCEPTED, this.peerId, this.context.cid)}, (ack) => {\r\n                if(ack.type === CallStatus.USERONLINE){\r\n                    //////  START RTC CaLL\r\n                    resolve(true);\r\n                }else{\r\n                    reject(false);\r\n                    ////// reconnecting.....and restoring\r\n                }\r\n            });\r\n        })\r\n    }\r\n    endCallSingnal = (to) => {\r\n        this.socket.emit(\"onCommunicate\", {query: new CallPacket(CallStatus.REJECTED, this.peerId, this.context.cid)});\r\n        this.context.handelOnAddCallStatus(CallStatus.REJECTED);\r\n        this.isBusy = false;\r\n        this.peerId = null;\r\n    }\r\n}\r\nexport default CallSignalingManager;","import io from \"socket.io-client\"\r\nimport MyMessage from \"./myMessage\";\r\nimport RTCPeerConnectionManager from './RTC/PeerConnectionManager';\r\nimport CallSignalingManager from \"./CALL_SIGNALING/CallSignalingManager\";\r\nimport { BASEURL } from \"../proxy\";\r\nclass Communicator {\r\n    constructor(){\r\n        this.socket = null\r\n        this.dataHandler = null;\r\n        this.ackEmitter = null;\r\n        this.ackEmitters = null;\r\n        this.cid = null;\r\n        this.socketConnected = false\r\n        this.rtcConfig = {iceServers: [\r\n          {url: \"stun:stun.l.google.com:19302\"}, \r\n          {\r\n            urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n            username: 'a9a2b514',\r\n            credential: '00163e7826d6'\r\n          }\r\n          ]}\r\n        ///// Video/Audio chat variables \r\n        this.callSignalingManager = false;\r\n\r\n        this.videoChatContext = null; \r\n        //// Initializing rtcConnectionManager on conncting to socket at this.socket.on(\"connect\"() => initizligin) \r\n        this.rtcConnectionManager = null\r\n      \r\n\r\n\r\n\r\n        this.connect = (cid, _dataHandler, _ackEmitter, _ackEmitters) => {\r\n            this.cid = cid;\r\n            this.dataHandler = _dataHandler;\r\n            this.ackEmitter = _ackEmitter;\r\n            this.ackEmitters = _ackEmitters;\r\n            this.socket = io(BASEURL, {query: {cid: cid}})\r\n            this.rtcConnectionManager = new RTCPeerConnectionManager(this, this.socket) ;\r\n            this.callSignalingManager = new CallSignalingManager(this.socket, this);\r\n          \r\n            this.send = (message, chatId) => {\r\n                console.log(\"EMIT ON SENT\")\r\n                this.socket.emit(\"onMessageSent\", {query: {message: message, chatId: chatId }}, (ack) => {\r\n                    this.ackEmitter(ack.message, MyMessage.SENT)\r\n                }) ;\r\n                console.log(\"onSentCalled\")\r\n                this.dataHandler(message);\r\n            }\r\n\r\n            this.markSeen = (messages, recieverCid, chatId) => {\r\n                this.socket.emit(\"onMarkSeenSent\", {query: {messages: messages, to: recieverCid, from: this.cid, chatId: chatId}}, (ack) => {\r\n                    this.ackEmitters(messages, recieverCid ,MyMessage.SEEN);\r\n                })\r\n            }\r\n\r\n            this.sendOnRecieveAck = msg => {\r\n              this.socket.emit(\"onRecievedAckSend\", {query: {message: {_id: msg._id, to: msg.to, from: msg.from}}})\r\n              this.ackEmitter(msg, MyMessage.RECIEVED)\r\n            }\r\n            this.socket.on(\"onRecieveMessage\", (res) => {\r\n                console.log(\"onRecieve: called\")\r\n                let query = res.query;\r\n                this.dataHandler(query.message);\r\n                this.sendOnRecieveAck(query.message)\r\n                // this.socket.emit(\"onRecievedAckSend\", {query: {message: {_id: query.message._id, to: query.message.to, from: query.message.from}}})\r\n                // this.dataHandler(query.message);\r\n            })\r\n            \r\n            \r\n            this.socket.on(\"onRecievedAck\", (res) => {\r\n                this.ackEmitter(res.query.message, MyMessage.RECIEVED)\r\n            })\r\n          \r\n            this.socket.on(\"onMarkSeen\", (res) => {\r\n                this.ackEmitters(res.query.messages, res.query.from, MyMessage.SEEN)\r\n            })\r\n          \r\n          \r\n          \r\n          \r\n          \r\n          \r\n          \r\n          \r\n          \r\n          \r\n          \r\n          //////// Connections Managers ////////////////////////////////////////////////////\r\n          \r\n            this.socket.on(\"connect\", () => {\r\n                console.log(\"STATUS: CONNECTED\")\r\n                this.socketConnected = true;\r\n                this.videoChatContext.setState({isConnected: true})\r\n                // this.rtcConnectionManager = new RTCPeerConnectionManager(this, this.socket) ;\r\n            })\r\n\r\n            this.socket.on(\"connect_error\", (error) => {\r\n                console.log(\"CONNECT: ERROR\")\r\n                this.socketConnected = false;\r\n                console.log(error);\r\n            })\r\n\r\n            this.socket.on(\"connect_timeout\", (timeout) => {\r\n                console.log(\"CONNECT: TIMEOUT\");\r\n                console.log(timeout);\r\n            })\r\n\r\n            this.socket.on('disconnect', (reason) => {\r\n                if (reason === 'io server disconnect') {\r\n                  // the disconnection was initiated by the server, you need to reconnect manually\r\n                  this.socket.connect();\r\n                }\r\n                // else the socket will automatically try to reconnect\r\n              });\r\n\r\n              this.socket.on('reconnect', (attemptNumber) => {\r\n                console.log(\"SOCKET: RECONNECTED\")\r\n                console.log(attemptNumber)\r\n              });\r\n\r\n\r\n              this.socket.on('reconnect_attempt', (attemptNumber) => {\r\n                console.log(\"RECONNECT ATTEMPTS\")\r\n                console.log(attemptNumber);\r\n              });\r\n\r\n\r\n              this.socket.on('reconnecting', (attemptNumber) => {\r\n                console.log(\"RECONNECTING...\")\r\n              });\r\n\r\n              this.socket.on('reconnect_error', (error) => {\r\n                console.log(\"RECONNECT ERROR\")\r\n              });\r\n           \r\n        }\r\n\r\n\r\n        //////// Video Chat Listners \r\n\r\n\r\n        //////// EXPOSED FUNCTIONS /////// \r\n        this.initializeSignaling = (to) => {\r\n          this.callSignalingManager.initializeSingnaling(to)\r\n        }\r\n        this.acceptCall = () => {\r\n          this.callSignalingManager.acceptSignaling()\r\n        }\r\n        this.setChatContext = (context) => {\r\n          this.videoChatContext = context;\r\n        } \r\n        this.endCallSignal = () => {\r\n          this.callSignalingManager.endCallSingnal()\r\n        }\r\n\r\n        /////////////////  /////////////\r\n        ///// DONT USE BELOW FUNCTIONS \r\n\r\n        this.createRTCConnection = (recieverId) => {\r\n          this.rtcConnectionManager.createConnection(this.cid, recieverId, this.rtcConfig)\r\n          //////// SHOW WINDOW \r\n        }\r\n\r\n        this.startRTCCall = (isVideo) => {\r\n          this.rtcConnectionManager.startCall(isVideo);\r\n        }\r\n      \r\n\r\n        this.setRTCChannelEnabled = (kind, value) => {\r\n          this.rtcConnectionManager.setChannelEnabled(kind, value);\r\n        }\r\n        this.destroyRTCConnection = () => {\r\n          //// TODO : \r\n          /// communicate partner of this.\r\n          this.rtcConnectionManager.destroyConnection();\r\n        }\r\n\r\n\r\n        this.handelOnAddRemoteStream = (remoteStream) => {\r\n          //////// send it to chatContext\r\n          this.videoChatContext.setState({peerStream: remoteStream});\r\n        }\r\n        this.handelOnAddLocalStream = (localStream) => {\r\n          //////// send it to context\r\n          this.videoChatContext.setState({localStream: localStream});\r\n        }\r\n        this.handelOnAddCallStatus = (status) => {\r\n          //// CALL status from Class: CallStatus\r\n          console.log(\"CALL STATUS \"+ status)\r\n          this.videoChatContext.setState({callStatus: status});\r\n        }\r\n\r\n\r\n    \r\n\r\n\r\n      \r\n    }\r\n}\r\n\r\nexport default Communicator;","// export const BASEURL = \"http://localhost:5000\";\r\nexport const BASEURL = \"https://niofoxvideochatserver.herokuapp.com/\";","class MyUser{\r\n    constructor(){\r\n        this._id = \"\";\r\n        this.username = \"\";\r\n        this.phoneNumber = \"\";\r\n        \r\n        this.setAttributes = (_id, username) => {\r\n            this._id  = _id;\r\n            this.username = username;\r\n            return this;\r\n        }\r\n        this.setValue = (user) => {\r\n            this._id = user._id;\r\n            this.username = user.username;\r\n            this.phoneNumber = user.phoneNumber;\r\n            return this;\r\n        }\r\n    }\r\n}\r\nexport default MyUser;","import MyMessage from \"./myMessage\";\r\nimport MyUser from \"../components/businessLogic/myUser\";\r\n\r\nclass MySingleUserChat{\r\n    static USER_NOT_FOUND = 0;\r\n    static CHAT_NOT_FOUND = 1;\r\n    static USER_CHAT_FOUND = 2;\r\n\r\n    constructor(user = {_id:\"\", username: \"\"}){\r\n        this._id = \"\";\r\n        this.cid = user._id;\r\n        this.title=user.username;\r\n        this.user = user;\r\n        this.messages =  [];\r\n        this.selected = false;\r\n        this.unseenCount = 0;\r\n        this.lastMessage = new MyMessage();\r\n        this.chatType = \"single\";\r\n        this.chatStatus = MySingleUserChat.CHAT_NOT_FOUND;\r\n        \r\n        this.setAttributes = ( messages, selected, unseenCount = 0) => {\r\n            this.user =user;\r\n            this.cid = user._id ;\r\n            this.title=user.username;\r\n            this.messages = messages;\r\n            this.selected = selected;\r\n            this.unseenCount = unseenCount;\r\n            return this;\r\n        }\r\n        this.compose = (sc1, sc2) => {\r\n             this.cid = sc1.cid;\r\n             this.title = sc1.title;\r\n             this.user = sc1.user;\r\n\r\n            if(sc2.chat){\r\n                this._id = sc2.chat._id;\r\n                this.messages = sc2.chat.messages;\r\n                this.chatStatus = sc2.chatStatus;\r\n                this.unseenCount =sc2.unseenCount;\r\n                if(this.messages.length > 0){\r\n                    this.lastMessage = new MyMessage().setValue(this.messages[this.messages.length -1]);\r\n                }\r\n            }\r\n            console.log(\"VALUE\")\r\n            console.log(this);\r\n            return this;\r\n        }\r\n        this.setValue = (singleChat) => {\r\n            this.cid = singleChat._id;\r\n            this.user = singleChat.user;\r\n            this.messages =singleChat.chat;\r\n            this.selected = false;\r\n            this.unseenCount = 0\r\n            return this;\r\n        }\r\n        this.setChat = (singleChat) => {\r\n            if(singleChat){\r\n                this.cid = singleChat._id;\r\n                this.messages =singleChat.chat;\r\n                this.title = singleChat.title;\r\n                this.selected = false;\r\n                this.unseenCount = 0\r\n            }else{\r\n                this.cid = \"\";\r\n                this.messages =[];\r\n                this.selected = false;\r\n                this.unseenCount = 0\r\n            }\r\n           \r\n            return this;\r\n        }\r\n        this.setUser = (user) => {\r\n            this.user = new MyUser().setValue(user);\r\n            return this;\r\n        }\r\n    }\r\n}\r\nexport default MySingleUserChat;","import MyMessage from \"./myMessage\";\r\nimport {AddGroupChatListner} from './index'\r\nclass MyGroupChat{\r\n    constructor( gcid ){\r\n        this._id = gcid;\r\n        this.cid = gcid;\r\n        this.title=\"Group Chat\";\r\n        this.users = [];\r\n        this.messages =  [];\r\n        this.selected = false;\r\n        this.unseenCount = 0;\r\n        this.lastMessage = new MyMessage();\r\n        this.chatType = \"group\";\r\n        this.chatStatus = 2;\r\n        this.setAttributes = ( users  ,messages, selected) => {\r\n            setTimeout(() =>AddGroupChatListner(this.cid), 500)\r\n            \r\n            this.users =users;\r\n            // this.title=user.username;\r\n            this.messages = messages;\r\n            this.selected = selected;\r\n            // this.unseenCount = unseenCount;\r\n            return this;\r\n        }\r\n        this.setValue = (singleChat) => {\r\n            setTimeout(() =>AddGroupChatListner(this.cid), 500)\r\n            // this.cid = singleChat.cid;\r\n            this.users = singleChat.users;\r\n            this.messages =singleChat.messages;\r\n            this.selected = singleChat.selected;\r\n            this.unseenCount = singleChat.unseenCount;\r\n            return this;\r\n        }\r\n    }\r\n}\r\nexport default MyGroupChat;","import MySingleUserChat from \"../../../RTCHAT/mySingleUserChat\";\r\nimport MyUser from \"../../../components/businessLogic/myUser\";\r\nimport { USER_CHAT_DATA_COLLECTOR,SET_CHAT_LIST_CM ,USER_CHAT_SENT_DATA_COLLECTOR,\r\n     USER_CHAT_HANDLE_SELECTD , HANDLE_REMOVE_CHAT, MSG_ACK_ACTION, MSGS_ACK_ACTION, INITIALIZE_CHAT_BETWEEN_CM} from \"../../../RTCHAT/types\";\r\nimport MyGroupChat from \"../../../RTCHAT/myGroupChat\";\r\n\r\nconst state = {\r\n    Chat: [\r\n        // new MySingleUserChat(new MyUser().setAttributes(\"A\", \"atamuhiuldin\")).setAttributes([], false ),\r\n        // new MySingleUserChat(new MyUser().setAttributes(\"B\", \"salman\")).setAttributes([], false ),\r\n        // new MySingleUserChat(new MyUser().setAttributes(\"C\", \"dawood\")).setAttributes([], false), \r\n        // new MyGroupChat(\"ABC\" ).setAttributes([\"A\" , \"B\", \"C\"], [], false),\r\n        // new MyGroupChat(\"CDB\" ).setAttributes([\"A\" , \"B\", \"C\"], [], false)\r\n      ], \r\n    user: {\r\n        _id: \"\", \r\n        username: \"\"\r\n    }\r\n}\r\n\r\n\r\nconst ChatReducer = (mState = {...state}, action) => {\r\n    switch(action.type){\r\n        case SET_CHAT_LIST_CM:\r\n        console.log(action.payload.chat)\r\n         mState.Chat = action.payload.chat;\r\n         localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n            return clone(mState);\r\n        case USER_CHAT_DATA_COLLECTOR:\r\n            let message = action.payload.message;\r\n            let ucId = message.chatType === \"group\"? message.to : message.from\r\n            if(message.from !== mState.user._id){\r\n                console.log(\"=========user data collection========\")\r\n                console.log(message)\r\n                let ucIndex = mState.Chat.findIndex(uc => uc.cid === ucId);\r\n                if(ucIndex >= 0){\r\n                    mState.Chat[ucIndex].messages.push(message);\r\n                    mState.Chat[ucIndex].lastMessage = message;\r\n                    mState.Chat.sort((a, b) =>  b.lastMessage.sentTimeDate- a.lastMessage.sentTimeDate)\r\n                }else{\r\n                    console.log(\"Undefined user message\")\r\n                    console.log(message);\r\n                }\r\n            }\r\n            mState.Chat.sort((a, b) => b.lastMessage.sentTimeDate - a.lastMessage.sentTimeDate )\r\n         localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n\r\n            return clone(mState);\r\n\r\n        case INITIALIZE_CHAT_BETWEEN_CM:\r\n            const {friend, chat} = action.payload;\r\n            let icbIndex = mState.Chat.findIndex(c => c.cid === friend._id);\r\n            if(icbIndex >= 0){\r\n                mState.Chat[icbIndex]._id = chat._id;\r\n                mState.Chat[icbIndex].chatStatus = MySingleUserChat.USER_CHAT_FOUND;\r\n            }\r\n         localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n             return clone(mState);\r\n        case USER_CHAT_SENT_DATA_COLLECTOR:\r\n                console.log(\"=========send data collection========\")\r\n                let messageSent = action.payload.message;\r\n                console.log(messageSent)\r\n                let ucsIndex = mState.Chat.findIndex(uc => uc.cid === messageSent.to);\r\n                if(ucsIndex >= 0){\r\n                    mState.Chat[ucsIndex].messages.push(messageSent);\r\n                    mState.Chat[ucsIndex].lastMessage = messageSent;\r\n                mState.Chat.sort((a, b) => b.lastMessage.sentTimeDate - a.lastMessage.sentTimeDate )\r\n\r\n                }else{\r\n                    console.log(\"Undefined user message\")\r\n                    console.log(messageSent);\r\n                }\r\n                localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n                return clone(mState);\r\n        \r\n        case USER_CHAT_HANDLE_SELECTD:\r\n            let cid = action.payload.cid;\r\n            for (let hindex = 0; hindex < mState.Chat.length; hindex++) {\r\n                if( mState.Chat[hindex].cid === cid){\r\n                    mState.Chat[hindex].selected = true\r\n                  \r\n                }else{\r\n                    mState.Chat[hindex].selected = false\r\n                }\r\n              }\r\n         localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n\r\n            return clone(mState);\r\n        case HANDLE_REMOVE_CHAT:\r\n            mState.Chat = mState.Chat.filter(c => c.cid !== action.payload.cid); \r\n            mState.Chat.sort((a, b) => b.lastMessage.sentTimeDate - a.lastMessage.sentTimeDate )\r\n            localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n\r\n            return clone(mState)\r\n        \r\n        case MSG_ACK_ACTION: \r\n              let msg = action.payload.message;\r\n              let status = action.payload.status;\r\n             \r\n              let ackIndex = mState.Chat.findIndex(c => c.cid === (msg.to === mState.user._id? msg.from :msg.to))\r\n              if(ackIndex >= 0){\r\n                  let ackmIndex = mState.Chat[ackIndex].messages.findIndex(m => m._id === msg._id )\r\n                  if(ackmIndex >= 0){\r\n                      mState.Chat[ackIndex].messages[ackmIndex].status = status;\r\n                      if(msg.newId){\r\n                      mState.Chat[ackIndex].messages[ackmIndex]._id = msg.newId;\r\n                      }\r\n                  }else{\r\n                    console.log(\"MSG NOT FOUND\")\r\n                  }\r\n              }else{\r\n                  console.log(\"CHAT NOT FOUND\")\r\n              }\r\n         localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n\r\n              return clone(mState);\r\n\r\n        case MSGS_ACK_ACTION: \r\n            let msgs = action.payload.messages;\r\n            let statuss = action.payload.status;\r\n            let ccid = action.payload.cid;\r\n            let acksIndex = mState.Chat.findIndex(c => c.cid === ccid)\r\n            let markCounter = 0;\r\n            if(acksIndex >= 0){\r\n                for (let msgsIndex = mState.Chat[acksIndex].messages.length -1 ; msgsIndex >= 0 ; msgsIndex--) {\r\n                    const element = mState.Chat[acksIndex].messages[msgsIndex];\r\n                    for (let seenmIndex = 0; seenmIndex < msgs.length; seenmIndex++) {\r\n                        const msgseen = msgs[seenmIndex];\r\n                        if(msgseen._id === element._id){\r\n                            mState.Chat[acksIndex].messages[msgsIndex].status = statuss;\r\n                            markCounter++;\r\n                            break; \r\n                        }\r\n                    }\r\n                    if(markCounter >= msgs.length){\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n         localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n\r\n              return clone(mState);\r\n        case \"SET_USER\": \r\n              mState.user = action.payload.user;\r\n              localStorage.setItem(\"userchatxyz1010\", JSON.stringify(mState) )\r\n                return clone(mState);\r\n        case \"LOGOUT\":\r\n            localStorage.removeItem(\"userchatxyz1010\")\r\n            return {\r\n                Chat: [\r\n                  ], \r\n                user: {\r\n                    _id: \"\", \r\n                    username: \"\"\r\n                }\r\n            }\r\n\r\n        default: \r\n           let data = localStorage.getItem(\"userchatxyz1010\")\r\n           if(data){\r\n               data = JSON.parse(data);\r\n               return data;\r\n           }else{\r\n            return clone(mState);\r\n           }\r\n    }\r\n}\r\nexport default ChatReducer;\r\n\r\nconst clone = (obj) =>{\r\n    return JSON.parse(JSON.stringify(obj))\r\n}","export const USER_CHAT_HANDLE_SELECTD =\"USER_CHAT_HANDLE_SELECTD\";\r\nexport const MSG_ACK_ACTION = \"MSG_ACK_ACTION\";\r\nexport const MSGS_ACK_ACTION = \"MSGS_ACK_ACTION\";\r\nexport const USER_CHAT_DATA_COLLECTOR = \"USER_CHAT_DATA_COLLECTOR\";\r\nexport const USER_CHAT_SENT_DATA_COLLECTOR = \"USER_CHAT_SENT_DATA_COLLECTOR\";\r\nexport const HANDLE_REMOVE_CHAT =\"HANDLE_REMOVE_CHAT\";\r\nexport const SET_CHAT_LIST_CM = \"SET_CHAT_LIST_CM\";\r\nexport const INITIALIZE_CHAT_BETWEEN_CM = \"INITIALIZE_CHAT_BETWEEN_CM\";\r\n\r\n\r\n/// CALL ACTIONS \r\nexport const CALL_RUNNING_STATUS = \"CALL_RUNNING_STATUS\";\r\n","\r\nconst state ={\r\n    user: {\r\n        _id: \"\", \r\n        username: \"\"\r\n    }\r\n}\r\n\r\nconst AuthReducer = (mState = {...state}, action) => {\r\n    switch(action.type){\r\n        case \"SET_USER\": \r\n        mState.user = action.payload.user;\r\n        localStorage.setItem(\"userauth1010\", JSON.stringify(mState))\r\n            return clone(mState);\r\n        case \"LOGOUT\":\r\n            localStorage.removeItem(\"userauth1010\");\r\n            return {\r\n                user: {\r\n                    _id: \"\", \r\n                    username: \"\"\r\n                }\r\n            }\r\n        default: \r\n        let data = localStorage.getItem(\"userauth1010\");\r\n        if(data){\r\n            return JSON.parse(data);\r\n        }else{\r\n            return clone(mState);\r\n        }\r\n    }\r\n}\r\nexport default AuthReducer;\r\n\r\nconst clone = (obj) =>{\r\n    return JSON.parse(JSON.stringify(obj))\r\n}","import {combineReducers} from 'redux';\r\n\r\nimport ChatReducer from './chatReducer';\r\nimport AuthReducer from './authReducer';\r\nconst RootReducer = combineReducers({\r\n    ChatReducer, \r\n    AuthReducer\r\n})\r\nexport default RootReducer;","import {createStore, applyMiddleware, compose} from 'redux';\r\nimport RootReducer from './reducers';\r\nimport thunk from 'redux-thunk';\r\nconst middleWare = [thunk]\r\n\r\nconst initialState ={}\r\n\r\n\r\nlet store = null \r\n\r\nif(window.__REDUX_DEVTOOLS_EXTENSION__){\r\n    store = createStore(\r\n        RootReducer, \r\n        initialState, \r\n        compose(applyMiddleware(...middleWare), \r\n        window.__REDUX_DEVTOOLS_EXTENSION__()\r\n        )\r\n    )\r\n}else{\r\n    store = createStore(\r\n        RootReducer, \r\n        initialState, \r\n        compose(applyMiddleware(...middleWare))\r\n    )\r\n}\r\n\r\nexport default store;","import MyCommunicatorObj from './communicator';\r\nimport store from '../store';\r\nimport { USER_CHAT_HANDLE_SELECTD, MSG_ACK_ACTION, \r\n     MSGS_ACK_ACTION ,USER_CHAT_DATA_COLLECTOR, USER_CHAT_SENT_DATA_COLLECTOR,\r\n      HANDLE_REMOVE_CHAT, SET_CHAT_LIST_CM, INITIALIZE_CHAT_BETWEEN_CM } from './types';\r\nimport MyMessage from './myMessage';\r\nimport axios from 'axios';\r\nimport MyUser from '../components/businessLogic/myUser';\r\nimport MySingleUserChat from './mySingleUserChat';\r\nimport MyGroupChat from './myGroupChat';\r\n// import PeerConnection from '../RTC/PeerConnection';\r\nexport const MyCommunicator = new MyCommunicatorObj();\r\nexport const configs =  [\r\n    {\r\n    id:1, \r\n    selected: false,\r\n    value: {iceServers: [\r\n      {urls: \"stun:stun.l.google.com:19302\"}, \r\n      {\r\n          urls: \"turn:numb.viagenie.ca\", \r\n          username: \"ata.mirza40@gmail.com\", \r\n          credential: \"ataMirza12345_\"\r\n      }\r\n      ]}\r\n    }, \r\n    {\r\n      id: 2, \r\n      selected:false,\r\n      value: {iceServers: [\r\n        {url: \"stun:stun.l.google.com:19302\"}\r\n        ]}\r\n    }, \r\n    {\r\n      id:3, \r\n      selected:true,\r\n      value:{iceServers: [\r\n        {url: \"stun:stun.l.google.com:19302\"}, \r\n        {\r\n          urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n          username: 'a9a2b514',\r\n          credential: '00163e7826d6'\r\n        }\r\n        ]}\r\n    }, \r\n    {\r\n      id: 4, \r\n      selected:false, \r\n      value: {\r\n        iceServers: [\r\n          {url: \"stun:stun.l.google.com:19302\"}, \r\n          {\r\n            url: 'turn:192.158.29.39:3478?transport=udp',\r\n            credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\r\n            username: '28224511:1379330808'\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      id: 5, \r\n      selected:false, \r\n      value: {\r\n        iceServers: [\r\n          {url: \"stun:stun.l.google.com:19302\"}, \r\n          {\r\n            \"urls\": [\r\n            \"turn:13.250.13.83:3478?transport=udp\"\r\n            ],\r\n            \"username\": \"YzYNCouZM1mhqhmseWk6\",\r\n            \"credential\": \"YzYNCouZM1mhqhmseWk6\"\r\n            }\r\n        ]\r\n      }\r\n    }, \r\n    {\r\n      id:6, \r\n      selected: false,\r\n      value: {iceServers: [\r\n        {urls: \"stun:stun.l.google.com:19302\"}, \r\n        {\r\n            urls: \"turn:numb.viagenie.ca\", \r\n            username: \"ata.mirza40@gmail.com\", \r\n            credential: \"ataMirza12345_\"\r\n        }\r\n        ], iceTransports: \"relay\"\r\n       }\r\n      }, \r\n    {\r\n      id: 7, \r\n      selected: false, \r\n      value: {iceServers: [\r\n        {url: \"stun:stun.l.google.com:19302\"}, \r\n        {\r\n        urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n        username: 'a9a2b514',\r\n        credential: '00163e7826d6'\r\n      }]}\r\n    }, \r\n    {\r\n      id: 8, \r\n      selected: false, \r\n      value: {iceServers: [\r\n        {\r\n        urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n        username: 'a9a2b514',\r\n        credential: '00163e7826d6'\r\n      }]}\r\n    }\r\n]\r\n\r\n\r\nconst MyGroupChatCommunicators = [];\r\nlet peerConnection = null;\r\nexport const loadAllChats = () => {\r\n\r\n\r\n\r\n    axios.post(\"http://localhost:5000/API/user/auth/get-all\")\r\n        .then(res =>{\r\n            if(res.data.success){\r\n                let chatData = res.data.users;\r\n                let myChat = [];\r\n                for (let index = 0; index < chatData.length; index++) {\r\n                    const singleChat = chatData[index];\r\n                    myChat.push(new MySingleUserChat(new MyUser().setValue(singleChat)).setAttributes([], false ))\r\n                }\r\n           \r\n                store.dispatch({\r\n                    type: SET_CHAT_LIST_CM, \r\n                    payload: {chat: myChat}\r\n                })\r\n            }else{\r\n                console.log(\"ERROR SUCCESS:FALSE\");\r\n                console.log(res.data.error);\r\n            }\r\n        }).catch(err =>{\r\n            console.log(\"CATCH: API, NETWORK ERROR\")\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nexport const prepareChat =  (userId) => {\r\n    axios.post(\"http://localhost:5000/API/user/chat/user-chat\", {userId: userId})\r\n        .then(res =>{\r\n            if(res.data.success){\r\n                let incomingChat = res.data.user.userChat;\r\n                let myChat = [...store.getState().ChatReducer.Chat];\r\n                let newChat = [];\r\n\r\n                //// merging \r\n                for (let iIndex = 0; iIndex < incomingChat.length; iIndex++) {\r\n                    const ic = incomingChat[iIndex];\r\n                    let icfound = false;\r\n                    for (let mIndex = 0; mIndex < myChat.length; mIndex++) {\r\n                        const mc = myChat[mIndex];\r\n                        \r\n                        if(mc.cid === ic.cid){\r\n                            icfound = true;\r\n                            mc._id = ic._id;\r\n                            mc.messages = ic.messages;\r\n                            mc.chatStatus = MySingleUserChat.USER_CHAT_FOUND;\r\n                            // mc.title = ic.title;\r\n                            newChat.push(mc);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(!icfound){\r\n                        ic.chatStatus = MySingleUserChat.USER_CHAT_FOUND;\r\n                        if(ic.chatType === \"group\"){\r\n                            newChat.push( new MyGroupChat(ic._id).setValue(ic) );\r\n                        }else{\r\n                            // newChat.push(ic);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                for (let mmIndex = 0; mmIndex < myChat.length; mmIndex++) {\r\n                    const mmc = myChat[mmIndex];\r\n                    let mmcfound = false;\r\n                    for (let iiIndex = 0; iiIndex < incomingChat.length; iiIndex++) {\r\n                        const iic = incomingChat[iiIndex];\r\n                        if(mmc.cid === iic.cid){\r\n                            mmcfound = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(!mmcfound){\r\n                        newChat.push(mmc);\r\n                    }\r\n                }\r\n            \r\n\r\n            \r\n                    store.dispatch({\r\n                        type: SET_CHAT_LIST_CM, \r\n                        payload: {chat: newChat}\r\n                    })\r\n            }else{\r\n            }\r\n        }).catch(err => {\r\n            console.log(\"CATCH: Error\");\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nexport const initializeChat = (userId, friendId) => {\r\n    axios.post(\"http://localhost:5000/API/user/chat/initialize-chat\", {userId: userId, friendId: friendId})\r\n        .then(res => {\r\n            if(res.data.success){\r\n                store.dispatch({\r\n                    type: INITIALIZE_CHAT_BETWEEN_CM,\r\n                    payload: {friend: res.data.friend, chat: res.data.chat} \r\n                })\r\n            }else{\r\n                console.log(\"INIT CHAT SUCCESS: FALSE\")\r\n                console.log(res.data.error)\r\n            }\r\n        }).catch(err => {\r\n            console.log(\"CATCH: INITIALIZE CHAT\")\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nexport const setUserChatSelected = (cid) => {\r\n    store.dispatch({\r\n        type: USER_CHAT_HANDLE_SELECTD, \r\n        payload: {cid: cid}\r\n    })\r\n}\r\nexport const logout = () => {\r\n    store.dispatch({\r\n        type: \"LOGOUT\"\r\n    })\r\n}\r\nconst ackEmitter = (message, status) => {\r\n    store.dispatch({\r\n        type: MSG_ACK_ACTION, \r\n        payload: {message: message, status}\r\n    })\r\n}\r\nconst ackEmitters = (messages, cid ,status) => {\r\n    store.dispatch({\r\n        type: MSGS_ACK_ACTION, \r\n        payload: {messages: messages, cid:cid ,status:status}\r\n    })\r\n}\r\n\r\nconst dataHandler = (message) => {\r\n  store.dispatch({\r\n      type: USER_CHAT_DATA_COLLECTOR, \r\n      payload: {message: message}\r\n  })\r\n}\r\n\r\nconst sentDataHandler = (message) => {\r\n     store.dispatch({\r\n         type: USER_CHAT_SENT_DATA_COLLECTOR, \r\n         payload: {message: message}\r\n     })\r\n   }\r\n\r\nexport const connectChat = (cid) => {\r\n    MyCommunicator.connect(cid, dataHandler, ackEmitter, ackEmitters);\r\n    store.dispatch({\r\n        type: HANDLE_REMOVE_CHAT, \r\n        payload: {cid: cid}\r\n    })\r\n}\r\nexport const sendMessage = (message, chatId) => {\r\n    MyCommunicator.send(message, chatId)\r\n    sentDataHandler(message)\r\n}\r\n\r\n\r\n\r\n\r\nexport const markSeen = (cid, chatId) => {\r\n    let chat = store.getState().ChatReducer.Chat;\r\n    let cIndex = chat.findIndex(c => c.cid === cid);\r\n    if(cIndex >= 0){\r\n        let messages = chat[cIndex].messages.filter(m => ((m.status === MyMessage.SENDING || m.status === MyMessage.RECIEVED || m.status === MyMessage.SENT) && m.from === cid ))\r\n        for (let index = 0; index < messages.length; index++) {\r\n             messages[index].status = MyMessage.SEEN;\r\n             messages[index].seenTimeDate = Date.now();\r\n        }\r\n        MyCommunicator.markSeen(messages, cid, chatId );\r\n    }\r\n}\r\n\r\n\r\n\r\n////// Add Group Chat Listner\r\n\r\n\r\nexport const AddGroupChatListner = (gcid) => {\r\n    MyGroupChatCommunicators.push(new MyCommunicatorObj().connect(gcid, dataHandler, ackEmitter, ackEmitter));\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n////////////////////////////////////////////////////////////////////\r\n///////////////////// VIDEO CHAT ////////////////////////////////////\r\n//////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n\r\nexport const setSelected = (id) => {\r\n    // let configsn = [configs]\r\n    for (let index = 0; index < configs.length; index++) {\r\n      const c = configs[index];\r\n      if(c.id === id){\r\n        configs[index].selected = true;\r\n      }else{\r\n        configs[index].selected = false;\r\n      }\r\n    }\r\n    // configs =  configsn;\r\n    return configs;\r\n  }\r\n\r\nconst getSelected = () => {\r\n    return configs.filter(c => c.selected === true)[0].value;\r\n  }\r\n\r\n \r\n//   export const createRTCConnection = (context,myId, peerId) => {\r\n//     MyCommunicator.rtcConnectionManager.createConnection(myId, peerId, getSelected())\r\n//     MyCommunicator.videoChatContext =context\r\n// }\r\n\r\n\r\n\r\n\r\n// export const startRTCCall = (context, myId, reciever) => {\r\n//     MyCommunicator.createRTCConnection(context, myId, reciever,getSelected() )\r\n// }\r\n\r\n// export const setCallChannelStates = (kind, value) => {\r\n    //     peerConnection.setChannelEnabled(kind, !this.state.isMute);\r\n    // }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    //////////////////////////\r\n    \r\n    \r\nexport const initiazlizeRTCCall = (to) => {\r\n       MyCommunicator.initializeSignaling( to);\r\n}\r\nexport const answerRTCCall = () => {\r\n  console.log(\"ANSWER CALL\")\r\n  MyCommunicator.acceptCall()\r\n}\r\nexport const setRTCCallContext = (context) => {\r\n    MyCommunicator.setChatContext(context)\r\n}\r\nexport const endRTCCall = () => {\r\n    MyCommunicator.destroyRTCConnection();\r\n    MyCommunicator.endCallSignal()\r\n}","export const setUser = (user) => dispatch =>{\r\n    dispatch({\r\n        type: \"SET_USER\", \r\n        payload: {user: user}\r\n    })\r\n}","import React from 'react';\r\nimport TextMessage from './textMessage';\r\nimport { sendMessage, markSeen, initializeChat} from '../RTCHAT'\r\nimport MyMessage from '../RTCHAT/myMessage';\r\nimport {connect} from 'react-redux';\r\nimport {setUser } from '../store/actions/authActions';\r\nimport MySingleUserChat from '../RTCHAT/mySingleUserChat';\r\nconst PRIMARY = \"#5BBC93\"\r\nconst SECONDRY = \"white\";\r\n\r\n\r\nclass SingleChat extends React.Component{\r\n  state={\r\n   \r\n\r\n    messageBody: \"\", \r\n    chat: []\r\n  }\r\n\r\n  handleSendMesage = (friend, chatId ,cid, chatType) => {\r\n      this.setState({messageBody: \"\"})\r\n      let message = null;\r\n      if(chatType === \"group\"){\r\n        message =  new MyMessage().setAttributes(cid, friend, this.state.messageBody).setAsGroupMessage()\r\n      }else{\r\n        message =  new MyMessage().setAttributes(cid, friend, this.state.messageBody)\r\n      }\r\n      sendMessage(message, chatId)\r\n  }\r\n\r\n \r\n\r\n  render(){\r\n      const userChat = this.props.userChat.filter(uc => uc.selected === true)[0];\r\n     \r\n       if(!userChat){\r\n           return false\r\n       }\r\n       if(userChat.chatStatus !== MySingleUserChat.USER_CHAT_FOUND){\r\n          return (\r\n            <div>\r\n                <button onClick={() => initializeChat( this.props.user._id, userChat.user._id)}>Initialize Chat with {userChat.title}</button>\r\n            </div>\r\n          )\r\n       }\r\n  return (\r\n    <div style={{width: \"100%\", height: \"100%\"}}>\r\n       <div style={{width: \"100%\",  height: 100, backgroundColor: PRIMARY}}>\r\n          {/* <div style={{width: \"100%\"}}>\r\n              {\r\n                  this.props.userChat.map(uc => \r\n                  <button onClick={() => this.handleConnect(uc)} style={{backgroundColor: uc.reserved? PRIMARY: SECONDRY, border: \"2px solid \"+uc.reserved? SECONDRY: PRIMARY, borderRadius: 30 }}>\r\n                        <span style={{color: uc.reserved? SECONDRY :PRIMARY, fontSize: 18}}>{uc.title}</span>\r\n                  </button>)\r\n              }\r\n          </div> */}\r\n            <span style={{fontSize: 30, color: \"white\", marginLeft: 20}}>{userChat.title}</span>\r\n          {/* <input value={this.state.uid} onChange={(e) => this.setState({uid: e.target.value})} style={{borderRadius: 30, padding: 5, color: PRIMARY}} placeholder=\"your name\"/>\r\n          <input value={this.state.friend} onChange={(e) => this.setState({friend: e.target.value})} style={{borderRadius: 30, padding: 5, color: PRIMARY}} placeholder=\"frient name\"/> */}\r\n\r\n          \r\n       </div>\r\n       <div style={{height: 550, width: \"100%\", overflowY: \"scroll\", backgroundColor: \"white\"}}>\r\n\r\n        {\r\n            userChat.messages.map((m, index) => <div key={index}><TextMessage message={m} cid={this.props.user._id}/><br/></div>)\r\n        }\r\n\r\n\r\n\r\n       </div>\r\n       <div style={{width: \"100%\", height: 70, backgroundColor: SECONDRY}}>\r\n     \r\n     \r\n        <input onFocus={() => markSeen(userChat.cid, userChat._id)} value={this.state.messageBody} onChange={(e) => this.setState({messageBody: e.target.value})} style={{borderRadius: 30, padding: 5, color: PRIMARY, width: \"70%\", height: 55, fontSize: 25}} placeholder=\"frient name\"/>\r\n      \r\n      \r\n        <button onClick={() => this.handleSendMesage(userChat.cid, userChat._id ,this.props.user._id, userChat.chatType)} style={{backgroundColor: PRIMARY, border: \"2px solid \"+SECONDRY, borderRadius: 30, width: \"20%\", height: 55 }}>\r\n          <span style={{color: SECONDRY, fontSize: 18}}>SEND</span>\r\n        </button>\r\n\r\n       </div>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n\r\nexport default connect(null, {setUser})(SingleChat);\r\n","import React, { Component } from 'react';\r\nimport {setUserChatSelected} from '../RTCHAT'\r\nconst PRIMARY = \"#5BBC93\"\r\n// const SECONDRY = \"white\";\r\n\r\nclass SingleUserChat extends Component {\r\n    state = {  }\r\n    render() { \r\n        const uc = this.props.singleChat;\r\n        const lastMessage = uc.messages.length > 0 ? uc.messages[uc.messages.length-1].body: false\r\n        const unseenCount = uc.messages.unseenCount;\r\n        return ( \r\n            <div onClick={() => setUserChatSelected(uc.cid)} style={{ cursor:\"pointer\",width: \"100%\", height: 100, backgroundColor: uc.selected? \"#EBEBEB\": \"white\", borderBottom: \"2px solid #f0f0f0\" }}>\r\n              <div align=\"center\" style={{ width: \"30%\", height: \"100%\" ,float:\"left\" ,borderRadius: 50, border: \"1px solid #f0f0f0\"}}>\r\n               { unseenCount > 0 ? <div align=\"center\"  style={{ marginTop:\"40%\" ,zIndex: 99, backgroundColor: PRIMARY , borderRadius: 50, width: \"25px\", height: \"25px\"}}> \r\n                    {unseenCount}\r\n                </div>: false}\r\n                   \r\n                </div>\r\n              <div style={{width: \"65%\", float: \"right\"}}>\r\n                <span style={{fontSize: 25, width: \"100%\", textAlign: \"center\"}}>{uc.title}</span><br/>\r\n                <span style={{textOverflow: \"ellipsis\"}}>{lastMessage}</span>\r\n              </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default SingleUserChat;","import React from 'react';\r\n\r\n// import PeerConnection from '../RTC/PeerConnection';\r\nimport {setRTCCallContext, initiazlizeRTCCall, endRTCCall, answerRTCCall, connectChat} from '../RTCHAT'\r\nimport CallStatus from '../RTCHAT/CALL_SIGNALING/callStatus';\r\nclass VideoCallingScreen extends React.Component {\r\n  \r\n  \r\n  constructor(){\r\n    super()\r\n\r\n    // this.myStream = React.createRef();\r\n    // this.friendStream = React.createRef();\r\n\r\n  this.state = {\r\n    localStream: null, \r\n    peerStream:null, \r\n    isConnected: false, \r\n    myId: \"\", \r\n    friendId: \"\", \r\n    callRunning: false, \r\n    isMute: false,\r\n    connectionState: \"\", \r\n    callStatus: -1,\r\n    configs:  [\r\n      {\r\n      id:1, \r\n      selected: false,\r\n      value: {iceServers: [\r\n        {urls: \"stun:stun.l.google.com:19302\"}, \r\n        {\r\n            urls: \"turn:numb.viagenie.ca\", \r\n            username: \"ata.mirza40@gmail.com\", \r\n            credential: \"ataMirza12345_\"\r\n        }\r\n        ]}\r\n      }, \r\n      {\r\n        id: 2, \r\n        selected:false,\r\n        value: {iceServers: [\r\n          {url: \"stun:stun.l.google.com:19302\"}\r\n          ]}\r\n      }, \r\n      {\r\n        id:3, \r\n        selected:true,\r\n        value:{iceServers: [\r\n          {url: \"stun:stun.l.google.com:19302\"}, \r\n          {\r\n            urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n            username: 'a9a2b514',\r\n            credential: '00163e7826d6'\r\n          }\r\n          ]}\r\n      }, \r\n      {\r\n        id: 4, \r\n        selected:false, \r\n        value: {\r\n          iceServers: [\r\n            {url: \"stun:stun.l.google.com:19302\"}, \r\n            {\r\n              url: 'turn:192.158.29.39:3478?transport=udp',\r\n              credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\r\n              username: '28224511:1379330808'\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        id: 5, \r\n        selected:false, \r\n        value: {\r\n          iceServers: [\r\n            {url: \"stun:stun.l.google.com:19302\"}, \r\n            {\r\n              \"urls\": [\r\n              \"turn:13.250.13.83:3478?transport=udp\"\r\n              ],\r\n              \"username\": \"YzYNCouZM1mhqhmseWk6\",\r\n              \"credential\": \"YzYNCouZM1mhqhmseWk6\"\r\n              }\r\n          ]\r\n        }\r\n      }, \r\n      {\r\n        id:6, \r\n        selected: false,\r\n        value: {iceServers: [\r\n          {urls: \"stun:stun.l.google.com:19302\"}, \r\n          {\r\n              urls: \"turn:numb.viagenie.ca\", \r\n              username: \"ata.mirza40@gmail.com\", \r\n              credential: \"ataMirza12345_\"\r\n          }\r\n          ], iceTransports: \"relay\"\r\n         }\r\n        }, \r\n      {\r\n        id: 7, \r\n        selected: false, \r\n        value: {iceServers: [\r\n          {url: \"stun:stun.l.google.com:19302\"}, \r\n          {\r\n          urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n          username: 'a9a2b514',\r\n          credential: '00163e7826d6'\r\n        }]}\r\n      }, \r\n      {\r\n        id: 8, \r\n        selected: false, \r\n        value: {iceServers: [\r\n          {\r\n          urls: 'turn:turn.msgsafe.io:443?transport=tcp',\r\n          username: 'a9a2b514',\r\n          credential: '00163e7826d6'\r\n        }]}\r\n      }\r\n  ]\r\n\r\n  }\r\n  this.peerConnectionA = null\r\n\r\n}\r\n\r\ncomponentDidMount(){\r\n  //// STEP # 1\r\n  setRTCCallContext(this);\r\n}\r\n\r\nconnectUser = () => {\r\n    if(this.state.myId !== \"\" && this.state.friendId !== \"\"){\r\n      console.log(\"STATE\")\r\n      console.log(this.state);\r\n      connectChat( this.state.myId);\r\n    }else{\r\n      alert(\"Invalid USER or FRIEND Id\")\r\n    }\r\n}\r\n\r\n\r\n\r\nhandleInitiateCall = ( ) => {\r\n    initiazlizeRTCCall(this.state.friendId);\r\n}\r\n\r\nendCall = () => {\r\n    endRTCCall();\r\n}\r\nanswerCall = () => {\r\n  answerRTCCall()\r\nthis.setState({callStatus: CallStatus.ACCEPTED})\r\n}\r\n\r\nsetSelected = (id) => {\r\n  let configs = [...this.state.configs]\r\n  for (let index = 0; index < configs.length; index++) {\r\n    const c = configs[index];\r\n    if(c.id === id){\r\n      configs[index].selected = true;\r\n    }else{\r\n      configs[index].selected = false;\r\n    }\r\n  }\r\n  this.setState({configs: configs})\r\n}\r\n\r\ngetSelected = () => {\r\n  return this.state.configs.filter(c => c.selected === true)[0].value;\r\n}\r\n\r\n\r\n\r\nrender(){\r\n  if(this.myStream){\r\n    this.myStream.srcObject = this.state.localStream; \r\n    this.myStream.volume = 0 ;\r\n    this.myStream.muted = true;\r\n    // this.friendStream.volume = 0;\r\n    // this.friendStream.muted = 0;\r\n    this.friendStream.srcObject = this.state.peerStream;\r\n  }\r\n\r\n  switch(this.state.callStatus){\r\n    case CallStatus.RINGING_REQUEST: \r\n      return (\r\n        <div style={{backgroundColor: \"#363442\" ,width: \"100%\", height: window.innerHeight}}>\r\n          <div align=\"center\" style={{alignSelf: \"center\"}}>\r\n            <div style={{height: 200}}/>\r\n            <span style={{color: \"white\", fontSize: 30}}>Ringing...</span><br/>\r\n            <div style={{height: 50}}/>\r\n            <button onClick={() => this.answerCall()} style={{width: 100, height: 50, backgroundColor: \"green\", border: \"0px\", borderRadius: 50, color: \"white\", fontSize: 20}}>Accept</button>\r\n            <button onClick={() => this.endCall()} style={{width: 100, height: 50, backgroundColor: \"red\", border: \"0px\", borderRadius: 50, color: \"white\", fontSize: 20}}>CANCEL</button>\r\n\r\n          </div>\r\n        </div>\r\n      )\r\n\r\n      case CallStatus.RINGING: \r\n      return (\r\n        <div style={{backgroundColor: \"#363442\" ,width: \"100%\", height: window.innerHeight}}>\r\n          <div align=\"center\" style={{alignSelf: \"center\"}}>\r\n            <div style={{height: 200}}/>\r\n            <span style={{color: \"white\", fontSize: 30}}>Ringing...</span><br/>\r\n            <div style={{height: 50}}/>\r\n            <button onClick={() => this.endCall()} style={{width: 100, height: 50, backgroundColor: \"red\", border: \"0px\", borderRadius: 50, color: \"white\", fontSize: 20}}>CANCEL</button>\r\n          </div>\r\n        </div>\r\n      )\r\n\r\n    case CallStatus.ACCEPTED: \r\n        return (\r\n          <div style={{backgroundColor: \"#363442\" ,width: \"100%\", height: window.innerHeight}}>\r\n             <video ref={e => this.friendStream = e} style={{width: \"100%\" ,height: window.innerHeight, backfaceVisibility:\"visible\"}}  autoPlay />\r\n             <video ref={e => this.myStream = e} style={{width: 200, zIndex: 999  , position:\"absolute\", bottom: 10, right: 10 , height: 200, backfaceVisibility:\"visible\"}}   />\r\n             <button onClick={() => this.endCall()} align=\"center\" style={{position: \"absolute\", backgroundColor:\"red\", width: 60, height: 60, color: \"white\" ,borderRadius: 50, border: \"0px\" ,bottom: 30, left: (window.innerWidth/2)-10}}>END</button>\r\n          </div>\r\n        )\r\n    default: \r\n    return (\r\n      <div className=\"App\">\r\n        <h1 align=\"center\">CHAT APPLICATIONS</h1>\r\n           <div style={{height: 100}}/>\r\n         { this.state.isConnected? \r\n         <React.Fragment>\r\n           <h2 align=\"center\">{`ME: ${this.state.myId}, FRIEND: ${this.state.friendId}`}</h2>\r\n          <div style={{paddingLeft: \"32%\", width: \"100%\"}}>\r\n              <button  style={{width: 300, height: 50, borderRadius: 30, margin:\"auto\"}} onClick={() => this.handleInitiateCall()}>START CALL</button>\r\n          </div>\r\n         </React.Fragment>:  \r\n         <React.Fragment>\r\n         <div style={{width: \"100%\", paddingLeft: \"34%\"}}>\r\n           <span style={{fontSize: 30}}>Me:</span><br/>\r\n           <input style={{borderRadius: 20, padding: 10, fontSize: 20}}  value={this.state.myId}  onChange={(e) => this.setState({myId: e.target.value})}  type=\"text\"/>\r\n          </div>\r\n          <div style={{width: \"100%\",paddingLeft: \"34%\"}}>\r\n           <span style={{fontSize: 30}}>Friend:</span><br/>\r\n           <input style={{borderRadius: 20, padding: 10, fontSize: 20}} value={this.state.friendId}  onChange={(e) => this.setState({friendId: e.target.value})}  type=\"text\"/>\r\n          </div>\r\n          <div style={{height: 30}}/>\r\n\r\n          <div style={{paddingLeft: \"32%\", width: \"100%\"}}>\r\n           <button  style={{width: 300, height: 50, borderRadius: 30, margin:\"auto\"}} onClick={() => this.connectUser()}>Connect</button>\r\n          </div></React.Fragment>}\r\n            {/* <button onClick={() => this.handleInitiateCall()}>Call</button> */}\r\n            {/* <button onClick={() => this.answerCall(true)}>Answer</button> */}\r\n          {/* <video ref={e => this.friendStream = e} style={{width: \"100%\" ,background:\"#f0f0f0\" ,height: 500, backfaceVisibility:\"visible\"}} autoPlay />\r\n          <video ref={e => this.myStream = e} style={{width: 200, zIndex: 999  , position:\"absolute\", bottom: 10, right: 10 , height: 200, backfaceVisibility:\"visible\"}} autoPlay /> */}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n}\r\n\r\n}\r\n\r\nexport default VideoCallingScreen;\r\n","import React from 'react';\nimport SingleChat from './components/singleChat'\nimport SingleUserChat from './components/singleUserChat'\nimport {connectChat, prepareChat} from './RTCHAT'\nimport {setUser} from './store/actions/authActions'\nimport {connect} from 'react-redux';\n// import TextMessage from './components/textMessage';\nimport {loadAllChats, logout} from './RTCHAT'\nimport VideoChatScreen from './components/videoChatScreen'\nconst PRIMARY = \"#5BBC93\"\nconst SECONDRY = \"white\";\n\nclass App extends React.Component{\n\n\n  state={\n    calling: true\n  }\n\n  handleConnect = (uc) => {\n    connectChat(uc.cid);\n   \n    prepareChat(uc.cid)\n    this.props.setUser(uc.user);\n    \n  }\n  componentDidMount() {\n    // loadAllChats()\n    // if(this.props.user._id !==\"\"){\n    //   connectChat(this.props.user._id)\n    //   prepareChat(this.props.user._id);\n    // }\n  }\n \n\n\n\n\n  render(){\n\n    if(this.state.calling){\n      return (\n        <VideoChatScreen/>\n      )\n    }\n\n  return (\n    \n    <div key={0} style={{width: \"100%\", height: \"100%\"}}>\n     \n\n\n\n     { this.props.user._id !== \"\" ?\n      (<div  key={1} style={{width: \"100%\", height: 700 }}>\n         <div  key={2} style={{width: \"20%\", height: \"100%\", backgroundColor: \"white\", float:\"left\"}}>\n          <div  key={3} style={{width: \"100%\", height: 100, textAlign:\"center\"}}>\n            <span  key={4} style={{fontSize: 25, color: PRIMARY}}>{this.props.user.username}</span>\n            <button onClick={() => {logout(); loadAllChats() }} style={{borderRadius: 10}}>logout</button>\n          </div>\n          {\n            this.props.userChat.map((sc, index) => <SingleUserChat key={index} singleChat={sc}/> )\n          }\n         \n        </div>\n        <div  key={5} style={{width: \"80%\", float:\"right\"}}>\n          <SingleChat  key={6} user={this.props.user} userChat={this.props.userChat} onConnect={this.handleConnectSocket} onSendMessage={this.handleSendMessage}/>\n        </div>\n      </div>) :\n      <div  key={7} align=\"center\" style={{margin:\"auto\", marginTop: 100}}>\n        \n              {\n                  this.props.userChat.map((uc, index) => \n                  <button key={index} onClick={() => this.handleConnect(uc)} style={{ width: \"200px\", height: \"100px\", cursor:\"pointer\" , border: \"2px solid \"+uc.reserved? SECONDRY: PRIMARY, borderRadius: 30 }}>\n                        <span style={{color: uc.reserved? SECONDRY :PRIMARY, fontSize: 18}}>{uc.title}</span>\n                  </button>)\n              }\n       </div>}\n    </div>\n   \n  );\n  }\n}\n\nconst mapStateToProps = state => ({\n  userChat: state.ChatReducer.Chat, \n  user: state.AuthReducer.user\n})\nexport default connect(mapStateToProps, {setUser})(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {Provider} from 'react-redux'\nimport store from './store'\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}